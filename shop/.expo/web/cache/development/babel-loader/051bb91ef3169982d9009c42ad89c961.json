{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { createSlice } from '@reduxjs/toolkit';\nimport { productsAPI } from \"../fetchAPI\";\nvar initialState = {\n  availableProducts: [],\n  isLoading: false,\n  error: null,\n  isSuccessed: false\n};\nvar productsSlice = createSlice({\n  name: 'products',\n  initialState: initialState,\n  reducers: {\n    setProducts: function setProducts(state, _ref) {\n      var payload = _ref.payload;\n      state.availableProducts = payload;\n      state.isLoading = false;\n      state.error = null;\n      state.isSuccessed = false;\n    },\n    startLoading: function startLoading(state) {\n      state.isLoading = true;\n      state.error = null;\n      state.isSuccessed = false;\n    },\n    setError: function setError(state, _ref2) {\n      var payload = _ref2.payload;\n      state.isLoading = false;\n      state.error = payload;\n      state.isSuccessed = false;\n    },\n    productCreated: function productCreated(state, _ref3) {\n      var payload = _ref3.payload;\n      var title = payload.title,\n          description = payload.description,\n          imageUrl = payload.imageUrl,\n          price = payload.price,\n          id = payload.id;\n      var newProduct = {\n        id: id,\n        title: title,\n        description: description,\n        imageUrl: imageUrl,\n        price: +price,\n        rate: 3.5,\n        reviews: []\n      };\n      state.availableProducts.push(newProduct);\n      state.isLoading = false;\n      state.error = null;\n      state.isSuccessed = true;\n    },\n    productUpdated: function productUpdated(state, _ref4) {\n      var payload = _ref4.payload;\n      var id = payload.id,\n          title = payload.title,\n          description = payload.description,\n          imageUrl = payload.imageUrl,\n          price = payload.price;\n      var idx = state.availableProducts.findIndex(function (el) {\n        return el.id === payload.id;\n      });\n      var newProduct = {\n        id: id,\n        title: title,\n        description: description,\n        imageUrl: imageUrl,\n        price: +price,\n        rate: state.availableProducts[idx].rate,\n        reviews: state.availableProducts[idx].reviews\n      };\n      state.availableProducts[idx] = newProduct;\n      state.isLoading = false;\n      state.error = null;\n      state.isSuccessed = true;\n    },\n    productDeleted: function productDeleted(state, _ref5) {\n      var payload = _ref5.payload;\n      state.availableProducts = state.availableProducts.filter(function (el) {\n        return el.id !== payload;\n      });\n      state.isLoading = false;\n      state.error = null;\n      state.isSuccessed = true;\n    }\n  }\n});\nexport var productActions = productsSlice.actions;\nexport var fetchProducts = function fetchProducts() {\n  return function _callee(dispatch) {\n    var products;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            dispatch(productActions.startLoading());\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(productsAPI.getProducts());\n\n          case 4:\n            products = _context.sent;\n            dispatch(productActions.setProducts(products));\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](1);\n            dispatch(productActions.setError(_context.t0.message));\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 8]], Promise);\n  };\n};\nexport var createProduct = function createProduct(_ref6) {\n  var title = _ref6.title,\n      description = _ref6.description,\n      imageUrl = _ref6.imageUrl,\n      price = _ref6.price;\n  return function _callee2(dispatch) {\n    var product;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            dispatch(productActions.startLoading());\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(productsAPI.createProduct({\n              title: title,\n              description: description,\n              imageUrl: imageUrl,\n              price: price\n            }));\n\n          case 4:\n            product = _context2.sent;\n            dispatch(productActions.productCreated(product));\n            _context2.next = 11;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](1);\n            dispatch(productActions.setError(_context2.t0.message));\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 8]], Promise);\n  };\n};\nexport var updateProduct = function updateProduct(_ref7) {\n  var title = _ref7.title,\n      description = _ref7.description,\n      imageUrl = _ref7.imageUrl,\n      id = _ref7.id,\n      price = _ref7.price;\n  return function _callee3(dispatch) {\n    var isSuccessed;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            dispatch(productActions.startLoading());\n            _context3.prev = 1;\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(productsAPI.updateProduct({\n              title: title,\n              description: description,\n              imageUrl: imageUrl,\n              id: id,\n              price: price\n            }));\n\n          case 4:\n            isSuccessed = _context3.sent;\n\n            if (isSuccessed) {\n              dispatch(productActions.productUpdated({\n                title: title,\n                description: description,\n                imageUrl: imageUrl,\n                id: id,\n                price: price\n              }));\n            }\n\n            _context3.next = 11;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](1);\n            dispatch(productActions.setError(_context3.t0.message));\n\n          case 11:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[1, 8]], Promise);\n  };\n};\nexport var deleteProduct = function deleteProduct(productId) {\n  return function _callee4(dispatch) {\n    var isSuccessed;\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            dispatch(productActions.startLoading());\n            _context4.prev = 1;\n            _context4.next = 4;\n            return _regeneratorRuntime.awrap(productsAPI.deleteProduct(productId));\n\n          case 4:\n            isSuccessed = _context4.sent;\n\n            if (isSuccessed) {\n              dispatch(productActions.productDeleted(productId));\n            }\n\n            _context4.next = 11;\n            break;\n\n          case 8:\n            _context4.prev = 8;\n            _context4.t0 = _context4[\"catch\"](1);\n            dispatch(productActions.setError(_context4.t0.message));\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[1, 8]], Promise);\n  };\n};\nexport default productsSlice.reducer;","map":{"version":3,"sources":["/Users/alisia/Projects/ReactNative/shop/store/products.slice.js"],"names":["createSlice","productsAPI","initialState","availableProducts","isLoading","error","isSuccessed","productsSlice","name","reducers","setProducts","state","payload","startLoading","setError","productCreated","title","description","imageUrl","price","id","newProduct","rate","reviews","push","productUpdated","idx","findIndex","el","productDeleted","filter","productActions","actions","fetchProducts","dispatch","getProducts","products","message","createProduct","product","updateProduct","deleteProduct","productId","reducer"],"mappings":"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","sourcesContent":["// @ts-nocheck\nimport { createSlice } from '@reduxjs/toolkit';\nimport { productsAPI } from '../fetchAPI';\n\nconst initialState = {\n  availableProducts: [],\n  isLoading: false,\n  error: null,\n  isSuccessed: false,\n};\n\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState,\n  reducers: {\n    setProducts: (state, { payload }) => {\n      state.availableProducts = payload;\n      state.isLoading = false;\n      state.error = null;\n      state.isSuccessed = false;\n    },\n    startLoading: (state) => {\n      state.isLoading = true;\n      state.error = null;\n      state.isSuccessed = false;\n    },\n    setError: (state, { payload }) => {\n      state.isLoading = false;\n      state.error = payload;\n      state.isSuccessed = false;\n    },\n    productCreated: (state, { payload }) => {\n      const { title, description, imageUrl, price, id } = payload;\n      const newProduct = {\n        id,\n        title,\n        description,\n        imageUrl,\n        price: +price,\n        rate: 3.5,\n        reviews: [],\n      };\n\n      state.availableProducts.push(newProduct);\n      state.isLoading = false;\n      state.error = null;\n      state.isSuccessed = true;\n    },\n    productUpdated: (state, { payload }) => {\n      const { id, title, description, imageUrl, price } = payload;\n      const idx = state.availableProducts.findIndex((el) => el.id === payload.id);\n      const newProduct = {\n        id,\n        title,\n        description,\n        imageUrl,\n        price: +price,\n        rate: state.availableProducts[idx].rate,\n        reviews: state.availableProducts[idx].reviews,\n      };\n      state.availableProducts[idx] = newProduct;\n      state.isLoading = false;\n      state.error = null;\n      state.isSuccessed = true;\n    },\n    productDeleted: (state, { payload }) => {\n      state.availableProducts = state.availableProducts.filter((el) => el.id !== payload);\n      state.isLoading = false;\n      state.error = null;\n      state.isSuccessed = true;\n    },\n  },\n});\n\nexport const productActions = productsSlice.actions;\n\n// Fetching products\nexport const fetchProducts = () => async (dispatch) => {\n  dispatch(productActions.startLoading());\n  try {\n    const products = await productsAPI.getProducts();\n    dispatch(productActions.setProducts(products));\n  } catch (err) {\n    dispatch(productActions.setError(err.message));\n  }\n};\n\n// Create new product\nexport const createProduct =\n  ({ title, description, imageUrl, price }) =>\n  async (dispatch) => {\n    dispatch(productActions.startLoading());\n    try {\n      const product = await productsAPI.createProduct({ title, description, imageUrl, price });\n      dispatch(productActions.productCreated(product));\n    } catch (err) {\n      dispatch(productActions.setError(err.message));\n    }\n  };\n// Updating product\nexport const updateProduct =\n  ({ title, description, imageUrl, id, price }) =>\n  async (dispatch) => {\n    dispatch(productActions.startLoading());\n    try {\n      const isSuccessed = await productsAPI.updateProduct({\n        title,\n        description,\n        imageUrl,\n        id,\n        price,\n      });\n      if (isSuccessed) {\n        dispatch(productActions.productUpdated({ title, description, imageUrl, id, price }));\n      }\n    } catch (err) {\n      dispatch(productActions.setError(err.message));\n    }\n  };\n\n// Deleting product\nexport const deleteProduct = (productId) => async (dispatch) => {\n  dispatch(productActions.startLoading());\n  try {\n    const isSuccessed = await productsAPI.deleteProduct(productId);\n    if (isSuccessed) {\n      dispatch(productActions.productDeleted(productId));\n    }\n  } catch (err) {\n    dispatch(productActions.setError(err.message));\n  }\n};\n\nexport default productsSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}