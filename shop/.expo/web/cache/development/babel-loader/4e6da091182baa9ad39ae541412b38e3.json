{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar productsAPI = {\n  baseUrl: 'https://react-4866c-default-rtdb.europe-west1.firebasedatabase.app/',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  getProducts: function getProducts() {\n    var response, resData, loadedProducts, key;\n    return _regeneratorRuntime.async(function getProducts$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(fetch(this.baseUrl + \"products.json\"));\n\n          case 3:\n            response = _context.sent;\n\n            if (response.ok) {\n              _context.next = 6;\n              break;\n            }\n\n            throw new Error('Упс... Что-то пошло не так');\n\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 8:\n            resData = _context.sent;\n            loadedProducts = [];\n\n            for (key in resData) {\n              loadedProducts.push(_objectSpread(_objectSpread({\n                id: key\n              }, resData[key]), {}, {\n                price: +resData[key].price\n              }));\n            }\n\n            return _context.abrupt(\"return\", loadedProducts);\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](0);\n            throw _context.t0;\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, this, [[0, 14]], Promise);\n  },\n  createProduct: function createProduct(_ref) {\n    var title, description, imageUrl, price, response, resData;\n    return _regeneratorRuntime.async(function createProduct$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            title = _ref.title, description = _ref.description, imageUrl = _ref.imageUrl, price = _ref.price;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(fetch(this.baseUrl + \"products.json\", {\n              method: 'POST',\n              headers: this.headers,\n              body: JSON.stringify({\n                title: title,\n                description: description,\n                imageUrl: imageUrl,\n                price: price,\n                rate: 3.5,\n                reviews: []\n              })\n            }));\n\n          case 4:\n            response = _context2.sent;\n\n            if (response.ok) {\n              _context2.next = 7;\n              break;\n            }\n\n            throw new Error('Упс... Что-то пошло не так');\n\n          case 7:\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 9:\n            resData = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              id: resData.name,\n              title: title,\n              description: description,\n              imageUrl: imageUrl,\n              price: price\n            });\n\n          case 13:\n            _context2.prev = 13;\n            _context2.t0 = _context2[\"catch\"](1);\n            throw _context2.t0;\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, this, [[1, 13]], Promise);\n  },\n  updateProduct: function updateProduct(_ref2) {\n    var title, description, imageUrl, price, id, response;\n    return _regeneratorRuntime.async(function updateProduct$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            title = _ref2.title, description = _ref2.description, imageUrl = _ref2.imageUrl, price = _ref2.price, id = _ref2.id;\n            _context3.prev = 1;\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(fetch(this.baseUrl + \"products/\" + id + \".json\", {\n              method: 'PATCH',\n              headers: this.headers,\n              body: JSON.stringify({\n                title: title,\n                description: description,\n                imageUrl: imageUrl,\n                price: price\n              })\n            }));\n\n          case 4:\n            response = _context3.sent;\n\n            if (response.ok) {\n              _context3.next = 7;\n              break;\n            }\n\n            throw new Error('Упс... Что-то пошло не так');\n\n          case 7:\n            return _context3.abrupt(\"return\", true);\n\n          case 10:\n            _context3.prev = 10;\n            _context3.t0 = _context3[\"catch\"](1);\n            throw _context3.t0;\n\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, this, [[1, 10]], Promise);\n  },\n  deleteProduct: function deleteProduct(id) {\n    var response;\n    return _regeneratorRuntime.async(function deleteProduct$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(fetch(this.baseUrl + \"products/\" + id + \".json\", {\n              method: 'DELETE'\n            }));\n\n          case 3:\n            response = _context4.sent;\n\n            if (response.ok) {\n              _context4.next = 6;\n              break;\n            }\n\n            throw new Error('Упс... Что-то пошло не так');\n\n          case 6:\n            return _context4.abrupt(\"return\", true);\n\n          case 9:\n            _context4.prev = 9;\n            _context4.t0 = _context4[\"catch\"](0);\n            throw _context4.t0;\n\n          case 12:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, this, [[0, 9]], Promise);\n  }\n};\nexport default productsAPI;","map":{"version":3,"sources":["/Users/alisia/Projects/ReactNative/shop/fetchAPI/productsAPI.js"],"names":["productsAPI","baseUrl","headers","getProducts","fetch","response","ok","Error","json","resData","loadedProducts","key","push","id","price","createProduct","title","description","imageUrl","method","body","JSON","stringify","rate","reviews","name","updateProduct","deleteProduct"],"mappings":"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","sourcesContent":["const productsAPI = {\n  baseUrl: 'https://react-4866c-default-rtdb.europe-west1.firebasedatabase.app/',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  async getProducts() {\n    try {\n      const response = await fetch(`${this.baseUrl}products.json`);\n\n      if (!response.ok) {\n        throw new Error('Упс... Что-то пошло не так');\n      }\n      const resData = await response.json();\n\n      const loadedProducts = [];\n\n      for (let key in resData) {\n        loadedProducts.push({ id: key, ...resData[key], price: +resData[key].price });\n      }\n\n      return loadedProducts;\n    } catch (err) {\n      throw err;\n    }\n  },\n  async createProduct({ title, description, imageUrl, price }) {\n    try {\n      const response = await fetch(`${this.baseUrl}products.json`, {\n        method: 'POST',\n        headers: this.headers,\n        body: JSON.stringify({ title, description, imageUrl, price, rate: 3.5, reviews: [] }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Упс... Что-то пошло не так');\n      }\n      const resData = await response.json();\n\n      return { id: resData.name, title, description, imageUrl, price };\n    } catch (err) {\n      throw err;\n    }\n  },\n  async updateProduct({ title, description, imageUrl, price, id }) {\n    try {\n      const response = await fetch(`${this.baseUrl}products/${id}.json`, {\n        method: 'PATCH',\n        headers: this.headers,\n        body: JSON.stringify({ title, description, imageUrl, price }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Упс... Что-то пошло не так');\n      }\n\n      return true;\n    } catch (err) {\n      throw err;\n    }\n  },\n\n  async deleteProduct(id) {\n    try {\n      const response = await fetch(`${this.baseUrl}products/${id}.json`, {\n        method: 'DELETE',\n      });\n\n      if (!response.ok) {\n        throw new Error('Упс... Что-то пошло не так');\n      }\n\n      return true;\n    } catch (err) {\n      throw err;\n    }\n  },\n};\n\nexport default productsAPI;\n"]},"metadata":{},"sourceType":"module"}